import{j as u,r as i,A as m,a as f,F as p,R as b,b as _}from"./vendor.8e1c443d.js";const h=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}};h();const g="_btn_dls0e_1";var l={btn:g,"btn-xs":"_btn-xs_dls0e_10","btn-small":"_btn-small_dls0e_15","btn-medium":"_btn-medium_dls0e_20","btn-large":"_btn-large_dls0e_27","btn-primary":"_btn-primary_dls0e_35","btn-secondary":"_btn-secondary_dls0e_39","btn-tertiary":"_btn-tertiary_dls0e_43","btn-exit":"_btn-exit_dls0e_47"};const a=u.exports.jsx,y=({onClick:s,className:t,children:r,size:o,type:e})=>a("button",{onClick:s,className:`
      ${l.btn} 
      ${l[`btn-${o}`]} 
      ${l[`btn-${e}`]} 
      ${t}`,children:r}),d=({device:s,command:t,label:r,params:o})=>a("div",{children:a(y,{onClick:async()=>{!s||s.sendCommand(t,o)},type:"primary",size:"large",children:r})}),w=({device:s})=>{const[t,r]=i.exports.useState();i.exports.useEffect(()=>{m.addModuleDataListener(o)},[s]);const o=async e=>{const n=v(e);n!==void 0&&t!==n.values[0]&&r(n.values[0])};return a("div",{children:t?a(d,{device:s,label:"STOP Mowing",params:"STOP",command:"switch_mowing"}):a(d,{device:s,label:"START Mowing",params:"START",command:"switch_mowing"})})};function v(s){const t=Object.values(s.streams);if(t.length===0)throw new Error("No streams.");const r=t[0];if(r===void 0)throw new Error("No stream.");if(r.loading)return;if(r.tooMuchData)throw new Error("Too much data.");if(r.data.length===0)throw new Error("No data.");const o=r.data[0].points.at(-1);if(!o)throw new Error("No datapoints.");return o[1]}const x=()=>{const[s,t]=i.exports.useState();i.exports.useEffect(()=>{r()},[]);const r=async()=>{if(await f.waitTilAuthenticated()){const o=await p.getCurrentDevice();t(o)}};return a("div",{className:"App",children:a(w,{device:s})})};b.render(a(_.StrictMode,{children:a(x,{})}),document.getElementById("root"));
