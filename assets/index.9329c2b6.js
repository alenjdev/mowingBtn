var u=Object.defineProperty;var l=(r,e,t)=>e in r?u(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var c=(r,e,t)=>(l(r,typeof e!="symbol"?e+"":e,t),t);import{j as f,r as d,A as m,B as p,a as h,F as g,R as v,b as y}from"./vendor.0c46e68e.js";const w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}};w();const o=f.exports.jsx;class M extends d.exports.Component{constructor(e){super(e);c(this,"receiveModuleData",async e=>{const{isMowing:t}=this.state,i=b(e);i!==void 0&&typeof i!="string"&&(i.values[0]===void 0||i.values.length===0||t!==i.values[0]&&this.setState({isMowing:i.values[0],disable:!1}))});c(this,"issueCommand",async()=>{const{device:e}=this.props,{isMowing:t}=this.state;!e||(e.sendCommand("switch_mowing",t?"STOP":"START"),this.setState({disable:!0}),setTimeout(()=>{this.setState({disable:!1})},2e4))});this.state={isMowing:!1,disable:!1}}componentDidMount(){m.addModuleDataListener(this.receiveModuleData)}render(){const{disable:e,isMowing:t}=this.state;return o("div",{children:o(p,{disabled:e,onClick:this.issueCommand,type:"primary",size:"large",children:t?"STOP mowing":"START mowing"})})}}function b(r){const e=Object.values(r.streams);if(e.length===0)return"No streams.";const t=e[0];if(t===void 0)return"No stream.";if(t.loading)return;if(t.tooMuchData)return"Too much data.";if(t.data.length===0)return"No data.";const i=t.data[0].points.at(-1);return i?i[1]:"No datapoints."}const D=()=>{const[r,e]=d.exports.useState();d.exports.useEffect(()=>{t()},[]);const t=async()=>{if(await h.waitTilAuthenticated()){const i=await g.getCurrentDevice();e(i)}};return o("div",{className:"App",children:o(M,{device:r})})};v.render(o(y.StrictMode,{children:o(D,{})}),document.getElementById("root"));
